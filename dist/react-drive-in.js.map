{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 283e67dbb52aee90e16a","webpack:///./lib/react-drive-in.jsx","webpack:///external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack:///./lib/drive-in.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wC;;;;;;;ACtCA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,wBAAuB,qBAAqB;AAC5C,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,4BAA2B,kCAAkC;AAC7D,kCAAiC,gFAAgF;AACjH;AACA;AACA,MAAK;;AAEL;AACA;AACA,0BAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA,EAAC;;;;;;;AClGD,gD;;;;;;ACAA;AACA;AACA;;AAEA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,aAAY;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;;AAEA,MAAK;;AAEL;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactDriveIn\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactDriveIn\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 283e67dbb52aee90e16a\n **/","/** @jsx React.DOM */var React = require('react');\n\nvar DriveIn = require('./drive-in');\n\nfunction videoItem(src) {\n    var video = {\n        type: null,\n        src: src\n    };\n\n    var ext = src.match(/\\.([0-9a-z]+)$/)[1];\n\n    video.type = 'video/' + ext;\n\n    return video;\n}\n\nfunction makePlaylist(toShow) {\n    var playlist = [];\n\n    if (typeof(toShow) === 'string') {\n        playlist.push(videoItem(toShow));\n    }\n\n    return playlist;\n}\n\nmodule.exports = React.createClass({\n    displayName: 'DriveIn',\n\n    propTypes: {\n        show: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.object, React.PropTypes.array]).isRequired,\n        ambient: React.PropTypes.bool\n    },\n\n    getDefaultProps:function() {\n        return {\n          className: 'drive-in'\n        };\n    },\n\n    getInitialState:function() {\n        return {\n            thumb: null,\n            imageLoaded: false,\n            showingVideo: false,\n\n            playlist: null,\n            initialized: false,\n            seeking: false,\n            playing: false,\n            queued: false,\n            ambient: false\n        };\n    },\n\n    getWrap:function() {\n        return this.refs.wrap.getDOMNode();\n    },\n\n    getVideo:function() {\n        return this.refs.video.getDOMNode();\n    },\n\n    componentWillMount:function() {\n        var playlist = makePlaylist(this.props.show);\n        this.setState({ playlist: playlist });\n    },\n\n    componentDidMount:function() {\n        var wrap = this.getWrap();\n        this.driveIn = new DriveIn();\n        this.driveIn.init(wrap);\n    },\n\n    componentWillUnmount:function() {\n        this.driveIn.close();\n    },\n\n    getVideoUrl:function() {\n        return this.state.playlist[0].src;\n    },\n\n    renderVideo:function() {\n        return (\n            React.DOM.div({ref: \"wrap\", id: \"drive-in-movie\"}, \n                React.DOM.video({ref: \"video\", src: this.getVideoUrl(), height: \"1\", width: \"1\", preload: \"auto\"})\n            )\n        );\n    },\n\n    render:function() {\n        return (\n          React.DOM.div({className: this.props.className}, \n            this.renderVideo()\n          )\n        );\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/react-drive-in.jsx\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}\n ** module id = 1\n ** module chunks = 0\n **/","/** @jsx React.DOM */function getVideoEl(el) {\n    var videoEl,\n        children = el.children;\n\n    for (var i = 0; i < children.length; i++) {\n        if (children[i].nodeName === 'VIDEO' && !videoEl) {\n            videoEl = children[i];\n        }\n    }\n\n    return videoEl;\n}\n\nfunction isBody(el) {\n    if (el.nodeName === 'BODY') {\n        return true;\n    }\n}\n\nfunction setStyles(el, props) {\n    // console.log(props);\n    for (var p in props) {\n        console.log(p, props[p]);\n        el.style[p] = props[p];\n    }\n}\n\nfunction DriveIn() {\n    this.containerEl = document.body;\n    this.wrapEl = null;\n    this.videoEl = null;\n\n    this.mediaAspect = 16 / 9;\n}\n\nDriveIn.prototype._updateSize = function() {\n\n    var container = this.containerEl,\n        videoEl = this.videoEl,\n        mediaAspect = this.mediaAspect;\n\n    var containerW = container.offsetWidth < window.outerWidth ? container.offsetWidth : window.outerWidth,\n        containerH = container.offsetHeight < window.outerHeight ? container.offsetHeight : window.outerHeight,\n        containerAspect = containerW / containerH;\n\n    if (isBody(container)) {\n        // $('html,body').css('height', window.outerHeight > $('body').css('height', 'auto').height() ? '100%' : 'auto');\n    }\n\n    console.log('left', (-(containerH * mediaAspect - containerW) / 2) + 'px');\n    console.log('width', (containerH * mediaAspect) + 'px');\n    console.log('height', containerH + 'px');\n\n        // console.log('obj', {\n        //     top: 0 + 'px',\n        //     left: (-(containerH * mediaAspect - containerW) / 2) + 'px',\n        //     width: (containerH * mediaAspect) + 'px',\n        //     height: containerH + 'px'\n        // });\n\n    if (containerAspect < mediaAspect) {\n        // taller\n        console.log('here');\n\n        setStyles(videoEl, {\n            top: 0 + 'px',\n            left: (-(containerH * mediaAspect - containerW) / 2) + 'px',\n            width: (containerH * mediaAspect) + 'px',\n            height: containerH + 'px'\n        });\n\n        // if (currMediaType == 'video') {\n        //         player\n        //             .width(containerH * mediaAspect)\n        //             .height(containerH);\n        //         if (!settings.shrinkable) {\n        //             $(vidEl)\n        //                 .css('top', 0)\n        //                 .css('left', -(containerH * mediaAspect - containerW) / 2)\n        //                 .css('height', containerH);\n        //         } else {\n        //             $(vidEl)\n        //                 .css('top', -(containerW / mediaAspect - containerH) / 2)\n        //                 .css('left', 0)\n        //                 .css('height', containerW / mediaAspect);\n        //         }\n        //         $(vidEl + '_html5_api')\n        //             .css('width', containerH * mediaAspect)\n        //             .css('height', containerH);\n        //         $(vidEl + '_flash_api')\n        //             .css('width', containerH * mediaAspect)\n        //             .css('height', containerH);\n        //     } else {\n        //         // is image\n        //         $('#big-video-image')\n        //             .css({\n        //                 width: 'auto',\n        //                 height: containerH,\n        //                 top: 0,\n        //                 left: -(containerH * mediaAspect - containerW) / 2\n        //             });\n        // }\n\n    } else {\n\n        // wider\n\n\n\n    //     if (currMediaType == 'video') {\n    //         player\n    //             .width(containerW)\n    //             .height(containerW / mediaAspect);\n    //         $(vidEl)\n    //             .css('top', -(containerW / mediaAspect - containerH) / 2)\n    //             .css('left', 0)\n    //             .css('height', containerW / mediaAspect);\n    //         $(vidEl + '_html5_api')\n    //             .css('width', $(vidEl + '_html5_api').parent().width() + \"px\")\n    //             .css('height', 'auto');\n    //         $(vidEl + '_flash_api')\n    //             .css('width', containerW)\n    //             .css('height', containerW / mediaAspect);\n    //     } else {\n    //         // is image\n    //         $('#big-video-image')\n    //             .css({\n    //                 width: containerW,\n    //                 height: 'auto',\n    //                 top: -(containerW / mediaAspect - containerH) / 2,\n    //                 left: 0\n    //             });\n    //     }\n\n\n    }\n}\n\nDriveIn.prototype._setMetadata = function(data) {\n    // console.log(this.mediaAspect);\n    var videoEl = this.videoEl;\n\n    this.mediaAspect = videoEl.videoWidth / videoEl.videoHeight;\n\n    // use html5 player to get mediaAspect\n    // mediaAspect = $('#big-video-vid_html5_api').prop('videoWidth')/$('#big-video-vid_html5_api').prop('videoHeight');\n\n    // updateSize();\n    // var dur = Math.round(player.duration());\n    // var durMinutes = Math.floor(dur/60);\n    // var durSeconds = dur - durMinutes*60;\n    // if (durSeconds < 10) durSeconds='0'+durSeconds;\n    // vidDur = durMinutes+':'+durSeconds;\n}\n\nDriveIn.prototype.init = function(el) {\n    var self = this;\n\n    this.wrapEl = el;\n    this.videoEl = getVideoEl(el);\n\n    this.videoEl.onloadedmetadata = function(data) {\n        self._setMetadata(data);\n        self._updateSize();\n    };\n\n    window.onresize = function() {\n        self._updateSize();\n    };\n};\n\nDriveIn.prototype.show = function() {\n\n};\n\nDriveIn.prototype.close = function() {\n\n};\n\n\nmodule.exports = DriveIn;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/drive-in.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"react-drive-in.js"}