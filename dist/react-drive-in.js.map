{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4e6a9f4fac811a040301","webpack:///./lib/react-drive-in.jsx","webpack:///external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack:///./lib/drive-in.js"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,wC;;;;;;;ACtCA;;AAEA;;AAEA;AACA,kBAAiB;AACjB;AACA,sBAAqB,mCAAmC;AACxD,sBAAqB;;AAErB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,MAAK;;AAEL;AACA;AACA;AACA,gDAA+C,6BAA6B;AAC5E,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA,UAAS;AACT,wCAAuC,yDAAyD;AAChG;;AAEA;AACA,4BAA2B,mCAAmC;AAC9D;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,0BAAyB,kEAAkE;AAC3F;AACA;AACA;AACA;AACA,EAAC;;;;;;;AChID,gD;;;;;;ACAA;AACA,mBAAkB;AAClB;AACA;;AAEA,oBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;;AAEA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,iBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA,cAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA4B;AAC5B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA,8BAA6B,uBAAuB;;AAEpD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,+BAA8B,mBAAmB;;AAEjD;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;;AAGA","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ReactDriveIn\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"ReactDriveIn\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4e6a9f4fac811a040301\n **/","/** @jsx React.DOM */var React = require('react');\n\nvar DriveIn = require('./drive-in');\n\nfunction playlistItem(src) {\n    var item = {},\n        type,\n        videoExts = { mp4: true, ogg: true, webm: true },\n        imageExts = { jpg: true, png: true, gif: true };\n\n    var ext = src.match(/\\.([mp4|ogg|webm|jpg|png|gif]+)$/)[1];\n    if (videoExts[ext]) {\n        type = 'video/' + ext;\n    }\n\n    if (imageExts[ext]) {\n        type = 'image/' + ext;\n    }\n\n    item[type] = src;\n    return item;\n}\n\nfunction makePlaylist(toShow) {\n    var playlist = [];\n\n    if (typeof(toShow) === 'string') {\n        playlist.push(playlistItem(toShow));\n    }\n\n    if (toShow.constructor === Array) {\n        for (var i in toShow) {\n            playlist.push(makePlaylist(toShow[i]));\n        }\n    }\n\n    if (toShow.constructor === Object) {\n        playlist.push(toShow);\n    }\n\n    return playlist;\n}\n\nmodule.exports = React.createClass({\n    displayName: 'DriveIn',\n\n    propTypes: {\n        show: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.object, React.PropTypes.array]).isRequired,\n        poster: React.PropTypes.string.isRequired,\n        ambient: React.PropTypes.bool\n    },\n\n    getDefaultProps:function() {\n        return {\n            className: 'drive-in',\n            ambient: true\n        };\n    },\n\n    getInitialState:function() {\n        return {\n            thumb: null,\n            imageLoaded: false,\n            showingVideo: false,\n\n            playlist: null,\n            initialized: false,\n            seeking: false,\n            playing: false,\n            queued: false,\n            ambient: true\n        };\n    },\n\n    getMedia:function() {\n        return this.refs.media.getDOMNode();\n    },\n\n    getPlaylist:function() {\n        return this.state.playlist;\n    },\n\n    getAmbient:function() {\n        return this.state.ambient;\n    },\n\n    componentWillMount:function() {\n        var playlist = makePlaylist(this.props.show);\n\n        this.setState({\n            playlist: playlist,\n            ambient: this.props.ambient\n        });\n    },\n\n    componentDidMount:function() {\n        this.driveIn = new DriveIn();\n        this.driveIn.init(this.getMedia());\n        this.driveIn.show(this.getPlaylist(), { ambient: this.getAmbient() });\n    },\n\n    componentWillUnmount:function() {\n        this.driveIn.close();\n    },\n\n    renderMedia:function() {\n        var content;\n\n        if ('ontouchstart' in window) {\n            content = React.DOM.img(null);\n        } else {\n            content = React.DOM.video({height: \"1\", width: \"1\", preload: \"auto\", autoplay: true});\n        }\n\n        return (\n            React.DOM.div({ref: \"media\", id: \"drive-in-media\"}, \n                content\n            )\n        );\n    },\n\n    render:function() {\n        return (\n          React.DOM.div({ref: \"wrap\", id: \"drive-in-wrap\", className: this.props.className}, \n            this.renderMedia()\n          )\n        );\n    }\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/react-drive-in.jsx\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external {\"root\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}\n ** module id = 1\n ** module chunks = 0\n **/","/** @jsx React.DOM */function getMedia(el) {\n    var media = {},\n        children = el.children,\n        node;\n\n    for (var i = 0; i < children.length; i++) {\n        node = children[i];\n        if (node.nodeName === 'VIDEO' && !media.el) {\n            media.type = 'video';\n            media.el = node;\n        }\n\n        if (node.nodeName === 'IMG' && !media.el) {\n            media.type = 'image';\n            media.el = node;\n        }\n    }\n\n    return media;\n}\n\nfunction isBody(el) {\n    if (el.nodeName === 'BODY') {\n        return true;\n    }\n}\n\nfunction setStyles(el, props) {\n    for (var p in props) {\n        el.style[p] = props[p];\n    }\n}\n\nfunction DriveIn() {\n    this.parentEl = null;\n    this.mediaEl = null;\n    this.ambient = true;\n    this.currMediaType = null;\n    this.mediaAspect = 16 / 9;\n}\n\nDriveIn.prototype._updateSize = function() {\n\n    var container = document.body,\n        parentEl = this.parentEl,\n        mediaEl = this.mediaEl,\n        mediaAspect = this.mediaAspect,\n        currMediaType = this.currMediaType;\n\n    var containerW = container.offsetWidth < window.outerWidth ? container.offsetWidth : window.outerWidth,\n        containerH = container.offsetHeight < window.outerHeight ? container.offsetHeight : window.outerHeight,\n        containerAspect = containerW / containerH;\n\n    if (isBody(container)) {\n        setStyles(container, {\n            height: 'auto'\n        });\n        if (window.outerHeight > container.offsetHeight) {\n            setStyles(container, {\n                height: '100%'\n            });\n            setStyles(document.documentElement, {\n                height: '100%'\n            });\n        }\n    }\n\n    if (containerAspect < mediaAspect) {\n        // taller\n        if (currMediaType == 'video') {\n\n            setStyles(mediaEl, {\n                width: containerH * mediaAspect + 'px',\n                height: containerH + 'px'\n            });\n\n            setStyles(parentEl, {\n                top: 0 + 'px',\n                left: (-(containerH * mediaAspect - containerW) / 2) + 'px',\n                width: (containerH * mediaAspect) + 'px',\n                height: containerH + 'px'\n            });\n\n            //         player\n            //             .width(containerH * mediaAspect)\n            //             .height(containerH);\n            //         if (!settings.shrinkable) {\n            //             $(vidEl)\n            //                 .css('top', 0)\n            //                 .css('left', -(containerH * mediaAspect - containerW) / 2)\n            //                 .css('height', containerH);\n            //         } else {\n            //             $(vidEl)\n            //                 .css('top', -(containerW / mediaAspect - containerH) / 2)\n            //                 .css('left', 0)\n            //                 .css('height', containerW / mediaAspect);\n            //         }\n            //         $(vidEl + '_html5_api')\n            //             .css('width', containerH * mediaAspect)\n            //             .css('height', containerH);\n        } else {\n            // is image\n\n            //         $('#big-video-image')\n            //             .css({\n            //                 width: 'auto',\n            //                 height: containerH,\n            //                 top: 0,\n            //                 left: -(containerH * mediaAspect - containerW) / 2\n            //             });\n        }\n\n    } else {\n\n        // wider\n        if (currMediaType == 'video') {\n\n            // setStyles(mediaEl, {\n            //     width: containerW + 'px',\n            //     height: Math.ceil(containerW / mediaAspect) + 'px'\n            // });\n\n            setStyles(parentEl, {\n                top: -Math.ceil(containerW / mediaAspect - containerH) / 2 + 'px',\n                left: 0 + 'px',\n                width: containerW + 'px',\n                height: (containerW / mediaAspect) + 'px'\n            });\n\n            setStyles(mediaEl, {\n                width: parentEl.offsetWidth + 'px',\n                height: 'auto'\n            });\n\n            //         player\n            //             .width(containerW)\n            //             .height(containerW / mediaAspect);\n            //         $(vidEl)\n            //             .css('top', -(containerW / mediaAspect - containerH) / 2)\n            //             .css('left', 0)\n            //             .css('height', containerW / mediaAspect);\n            //         $(vidEl + '_html5_api')\n            //             .css('width', $(vidEl + '_html5_api').parent().width() + \"px\")\n            //             .css('height', 'auto');\n            //         $(vidEl + '_flash_api')\n            //             .css('width', containerW)\n            //             .css('height', containerW / mediaAspect);\n        } else {\n            // is image\n\n            //         $('#big-video-image')\n            //             .css({\n            //                 width: containerW,\n            //                 height: 'auto',\n            //                 top: -(containerW / mediaAspect - containerH) / 2,\n            //                 left: 0\n            //             });\n        }\n    }\n}\n\nDriveIn.prototype._setMetadata = function(data) {\n    var mediaEl = this.mediaEl;\n    this.mediaAspect = mediaEl.videoWidth / mediaEl.videoHeight;\n    this._updateSize();\n\n    // var dur = Math.round(player.duration());\n    // var durMinutes = Math.floor(dur/60);\n    // var durSeconds = dur - durMinutes*60;\n    // if (durSeconds < 10) durSeconds='0'+durSeconds;\n    // vidDur = durMinutes+':'+durSeconds;\n};\n\nDriveIn.prototype._play = function (video, loop, ambient) {\n    var mediaEl = this.mediaEl,\n        source,\n        canPlay;\n\n    for (var type in video) {\n        canPlay = mediaEl.canPlayType(type);\n        if (canPlay === 'probably') {\n            source = video[type]\n        } else if (canPlay && !source) {\n            source = video[type];\n        }\n    }\n\n    if (source) {\n\n        this.mediaEl.src = source;\n\n        if (loop) {\n            this.mediaEl.loop = true;\n        }\n\n        if (ambient) {\n            this.mediaEl.muted = true;\n            this.mediaEl.volume = 0;\n        }\n\n        this.mediaEl.play();\n    }\n}\n\nDriveIn.prototype._loadPlaylist = function (playlist) {\n    var item = playlist[0];\n    this._play(item, (playlist.length === 1), this.ambient);\n\n    // for (var i in playlist) {\n    //     item = playlist[i];\n    // }\n\n};\n\nDriveIn.prototype._setMedia = function(media) {\n    var self = this;\n\n    this.mediaEl = media.el;\n    setStyles(this.mediaEl, { position: 'absolute' });\n\n    this.currMediaType = media.type;\n\n    if (media.type === 'video') {\n        this.mediaEl.onloadedmetadata = function(data) {\n            self._setMetadata(data);\n        };\n    }\n\n    if (media.type === 'image') {\n        // imagesloaded or something...\n    }\n}\n\nDriveIn.prototype.init = function(el) {\n    var self = this;\n\n    this.parentEl = el;\n    setStyles(this.parentEl, { display: 'block' });\n\n    var media = getMedia(el);\n    this._setMedia(media);\n\n    window.onresize = function() {\n        self._updateSize();\n    };\n};\n\nDriveIn.prototype.show = function(playlist, options) {\n    options = options || {};\n\n    if (options.hasOwnProperty('ambient')) {\n        this.ambient = options.ambient;\n    }\n\n    this._loadPlaylist(playlist);\n};\n\nDriveIn.prototype.close = function() {\n\n};\n\n\nmodule.exports = DriveIn;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./lib/drive-in.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":"","file":"react-drive-in.js"}